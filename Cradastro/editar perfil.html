<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Editar Perfil</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f6; display: flex; justify-content: center; padding: 40px; }
        .edit-card { background: white; width: 400px; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 12px; color: #888; margin-bottom: 5px; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; }
        .btn-save { width: 100%; padding: 12px; background: #3e8e63; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="edit-card">
    <h3>Atualizar Meus Dados</h3><br>
    <form id="editForm">
        <div class="form-group">
            <label>Nome Completo</label>
            <input type="text" id="edit-nome" required>
        </div>
        <div class="form-group">
            <label>E-mail (Acesso)</label>
            <input type="email" id="edit-email" required>
        </div>
        <div class="form-group">
            <label>Data de Nascimento</label>
            <input type="date" id="edit-data">
        </div>
        <button type="submit" class="btn-save">Salvar Alterações</button>
        <a href="Perfil.htm" style="display:block; text-align:center; margin-top:15px; color:#666; text-decoration:none; font-size:14px;">Cancelar</a>
    </form>
</div>

<script>
    window.onload = function() {
        const user = JSON.parse(localStorage.getItem('usuarioLogado'));
        if (user) {
            document.getElementById('edit-nome').value = user.nome;
            document.getElementById('edit-email').value = user.email;
            document.getElementById('edit-data').value = user.nascimento || "";
        }
    };

    document.getElementById('editForm').onsubmit = function(e) {
        e.preventDefault();
        const userAtual = JSON.parse(localStorage.getItem('usuarioLogado'));
        
        const novosDados = {
            ...userAtual,
            nome: document.getElementById('edit-nome').value,
            email: document.getElementById('edit-email').value,
            nascimento: document.getElementById('edit-data').value
        };

        // Atualiza a sessão e o registro principal
        localStorage.setItem('usuarioLogado', JSON.stringify(novosDados));
        localStorage.setItem(novosDados.email, JSON.stringify(novosDados));

        alert("Dados atualizados com sucesso!");
        window.location.href = 'Perfil.htm';
    };
</script>
</body>
</html>